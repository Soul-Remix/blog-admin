(this["webpackJsonpblog-admin"]=this["webpackJsonpblog-admin"]||[]).push([[0],{192:function(e,t,c){},193:function(e,t,c){},194:function(e,t,c){},195:function(e,t,c){},196:function(e,t,c){},197:function(e,t,c){},198:function(e,t,c){},199:function(e,t,c){},200:function(e,t,c){},201:function(e,t,c){},202:function(e,t,c){},203:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),r=c(76),n=c.n(r),o=c(11),i=c(6),l=c.n(i),j=c(12),u=c(3),d=c(2),b=(c(88),c(0)),m=function(e){var t=e.isAuth,c=e.logout;return Object(b.jsxs)("nav",{children:[Object(b.jsx)("h1",{className:"logo",children:Object(b.jsx)(o.b,{to:"/",children:"Blog"})}),t&&Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(o.c,{exact:!0,to:"/",activeClassName:"selected",children:"Home"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)("button",{className:"nav-btn",onClick:c,children:"Logout"})})]})]})},h=c(13),p=c(20),O=(c(192),function(){return Object(b.jsxs)("div",{className:"loader",children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{})]})}),x=c(19),f=c(40),v=["label"],g=function(e){var t=e.label,c=Object(f.a)(e,v),a=Object(h.c)(c),s=Object(u.a)(a,2),r=s[0],n=s[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("label",{htmlFor:c.id||c.name,children:t}),Object(b.jsx)("input",Object(x.a)(Object(x.a)({className:n.touched&&n.error?"input-error":""},r),c)),n.touched&&n.error?Object(b.jsx)("div",{className:"error",children:n.error}):null]})},N=(c(193),function(e){var t=e.login,c=e.error,a=e.loggingIn;return Object(b.jsx)("section",{className:"login-container",children:Object(b.jsx)(h.b,{initialValues:{userName:"",password:""},validationSchema:p.a({userName:p.b().max(15,"Must be 15 characters or less").required("Required"),password:p.b().max(15,"Must be 15 characters or less").required("Required")}),onSubmit:function(e){return t(e)},children:Object(b.jsxs)(h.a,{className:"auth-form",children:[Object(b.jsx)("h2",{className:"auth-form-header",children:"LogIn"}),c&&Object(b.jsx)("p",{className:"error auth-form-p",children:c}),Object(b.jsx)(g,{label:"User Name",name:"userName",type:"text",placeholder:"user name"}),Object(b.jsx)(g,{label:"password",name:"password",type:"password",placeholder:"password"}),!a&&Object(b.jsx)("button",{className:"auth-form-btn",type:"submit",children:"LogIn"}),a&&Object(b.jsx)(O,{})]})})})}),w=(c(194),function(e){var t=e.post,c=e.deletePost,a=e.editPost;return Object(b.jsxs)("section",{className:"post-card",children:[Object(b.jsx)("img",{src:"https://guarded-bayou-18266.herokuapp.com/".concat(t.image),alt:"",className:"post-card-image"}),Object(b.jsxs)("div",{className:"post-card-detail",children:[Object(b.jsx)("h2",{className:"post-card-title",children:t.title}),Object(b.jsx)("p",{className:"post-card-desc",children:t.description}),Object(b.jsxs)("p",{children:["Views: ",Object(b.jsx)("span",{className:"post-card-view",children:t.views})]}),Object(b.jsxs)("p",{children:["Comments:"," ",Object(b.jsx)("span",{className:"post-card-view",children:t.comments.length})]}),Object(b.jsxs)("div",{className:"post-card-buttons",children:[Object(b.jsx)(o.b,{className:"post-card-btn post-btn-view",to:"/post/".concat(t._id),children:"View"}),Object(b.jsx)("button",{className:"post-card-btn post-btn-edit",onClick:function(){return a(t)},children:"Edit"}),Object(b.jsx)("button",{className:"post-card-btn post-btn-delete",onClick:function(){return c(t._id)},children:"Delete"})]})]})]},t._id)}),y=(c(195),function(e){var t=e.message;return Object(b.jsxs)("div",{className:"error-container",children:[Object(b.jsx)("div",{className:"overlay"}),Object(b.jsxs)("div",{className:"error-card",children:[Object(b.jsx)("h2",{children:"Error"}),Object(b.jsx)("p",{children:t}),Object(b.jsx)("button",{className:"error-button",onClick:function(){window.location.reload()},children:"Close"})]})]})}),k=(c(196),["label"]),S=function(e){var t=e.label,c=Object(f.a)(e,k),a=Object(h.c)(c),s=Object(u.a)(a,2),r=s[0],n=s[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("label",{htmlFor:c.id||c.name,children:t}),Object(b.jsx)("textarea",Object(x.a)(Object(x.a)({className:n.touched&&n.error?"input-error":""},r),c)),n.touched&&n.error?Object(b.jsx)("div",{className:"error",children:n.error}):null]})},q=(c(197),function(e){var t=e.title,c=e.description,s=e.editing,r=e.id,n=e.close,o=Object(a.useState)(!1),i=Object(u.a)(o,2),m=i[0],x=i[1],f=Object(a.useState)(null),v=Object(u.a)(f,2),N=v[0],w=v[1],y=Object(d.e)(),k=function(){var e=Object(j.a)(l.a.mark((function e(t){var c,a,n,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,x(!0),c=localStorage.getItem("token"),(a=new FormData).append("title",t.title),a.append("description",t.description),t.image&&a.append("image",t.image),!s){e.next=13;break}return e.next=10,fetch("https://guarded-bayou-18266.herokuapp.com/api/v1/post/".concat(r),{method:"PATCH",body:a,headers:{Authorization:"Bearer ".concat(c)}});case 10:n=e.sent,e.next=16;break;case 13:return e.next=15,fetch("https://guarded-bayou-18266.herokuapp.com/api/v1/posts",{method:"PUT",body:a,headers:{Authorization:"Bearer ".concat(c)}});case 15:n=e.sent;case 16:return e.next=18,n.json();case 18:o=e.sent,200!==n.status?(w(o),x(!1)):(x(!1),y.push("/post/".concat(o.post._id))),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),w(e.t0),x(!1);case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("section",{className:s?"create-container hover-container":"create-container",children:Object(b.jsx)(h.b,{initialValues:{title:t||"",description:c||"",image:""},validationSchema:p.a({title:p.b().max(100,"Must be 100 characters or less").required("Required"),description:p.b().required("Required")}),onSubmit:function(e){k(e)},children:function(e){return Object(b.jsxs)(h.a,{className:"create-form",encType:"multipart/form-data",children:[Object(b.jsx)("h2",{className:"create-form-header",children:s?"Edit Post":"Create Post"}),Object(b.jsx)(g,{label:"Title",name:"title",type:"text",placeholder:"Post Title"}),Object(b.jsx)("label",{children:"Image"}),Object(b.jsx)("input",{label:"Image",name:"image",type:"file",placeholder:"Post Image",onChange:function(t){e.setFieldValue("image",t.target.files[0])}}),Object(b.jsx)(S,{label:"Content",name:"description",placeholder:"Post Content"}),N&&Object(b.jsx)("p",{className:"error create-form-p",children:N.message}),Object(b.jsxs)("div",{className:"create-form-btns",children:[s&&!m&&Object(b.jsx)("button",{className:"create-form-btn create-form-close",onClick:n,children:"Close"}),!m&&Object(b.jsx)("button",{type:"submit",className:"create-form-btn",children:"Submit"})]}),m&&Object(b.jsx)(O,{})]})}})})}),I=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),c=t[0],s=t[1],r=Object(a.useState)(null),n=Object(u.a)(r,2),i=n[0],d=n[1],m=Object(a.useState)(!1),h=Object(u.a)(m,2),p=h[0],O=h[1],f=Object(a.useState)({}),v=Object(u.a)(f,2),g=v[0],N=v[1],k=function(){var e=Object(j.a)(l.a.mark((function e(){var t,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://guarded-bayou-18266.herokuapp.com/api/v1/posts/all");case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,200===t.status?s(c.posts):d(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){k()}),[]);var S=function(){var e=Object(j.a)(l.a.mark((function e(t){var a,r,n,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage.getItem("token"),e.next=4,fetch("https://guarded-bayou-18266.herokuapp.com/api/v1/posts",{method:"DELETE",headers:{Authorization:"Bearer ".concat(a),postId:t}});case 4:return r=e.sent,e.next=7,r.json();case 7:if(n=e.sent,200===r.status){e.next=13;break}return d(n),e.abrupt("return");case 13:return o=c.filter((function(e){return e._id!==n.post._id})),s(o),e.abrupt("return");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),d(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),I=function(e){N(Object(x.a)({},e)),O(!0)};return i?Object(b.jsx)(y,{message:i.message}):Object(b.jsxs)(b.Fragment,{children:[p&&Object(b.jsx)(q,{title:g.title,description:g.description,editing:!0,id:g._id,close:function(){O(!1),N({})}}),!p&&Object(b.jsxs)("main",{className:"main-container",children:[Object(b.jsx)(o.b,{to:"/create",className:"main-create-link",children:"Create Post"}),c.map((function(e){return Object(b.jsx)(w,{post:e,deletePost:S,editPost:I},e._id)}))]})]})},C=(c(198),function(){return Object(b.jsxs)("div",{className:"social",children:[Object(b.jsx)("a",{href:"#comments",children:Object(b.jsx)("svg",{version:"1.1",width:"28",height:"28",viewBox:"0 0 28 28","aria-hidden":"true",className:"symbol-social symbol-social-comments",children:Object(b.jsx)("path",{d:"M22 12q0 2.172-1.469 4.016t-4.008 2.914-5.523 1.070q-1.344 0-2.75-0.25-1.937 1.375-4.344 2-0.562 0.141-1.344 0.25h-0.047q-0.172 0-0.32-0.125t-0.18-0.328q-0.016-0.047-0.016-0.102t0.008-0.102 0.031-0.094l0.039-0.078t0.055-0.086 0.063-0.078 0.070-0.078 0.063-0.070q0.078-0.094 0.359-0.391t0.406-0.461 0.352-0.453 0.391-0.602 0.32-0.688q-1.937-1.125-3.047-2.766t-1.109-3.5q0-2.172 1.469-4.016t4.008-2.914 5.523-1.070 5.523 1.070 4.008 2.914 1.469 4.016zM28 16q0 1.875-1.109 3.508t-3.047 2.758q0.156 0.375 0.32 0.688t0.391 0.602 0.352 0.453 0.406 0.461 0.359 0.391q0.016 0.016 0.063 0.070t0.070 0.078 0.063 0.078 0.055 0.086l0.039 0.078t0.031 0.094 0.008 0.102-0.016 0.102q-0.047 0.219-0.203 0.344t-0.344 0.109q-0.781-0.109-1.344-0.25-2.406-0.625-4.344-2-1.406 0.25-2.75 0.25-4.234 0-7.375-2.063 0.906 0.063 1.375 0.063 2.516 0 4.828-0.703t4.125-2.016q1.953-1.437 3-3.313t1.047-3.969q0-1.203-0.359-2.375 2.016 1.109 3.187 2.781t1.172 3.594z"})})}),Object(b.jsx)("a",{href:"www.facebook.com",children:Object(b.jsx)("svg",{version:"1.1",width:"16",height:"28",viewBox:"0 0 16 28","aria-hidden":"true",className:"symbol-social symbol-social-facebook",children:Object(b.jsx)("path",{d:"M14.984 0.187v4.125h-2.453q-1.344 0-1.813 0.562t-0.469 1.687v2.953h4.578l-0.609 4.625h-3.969v11.859h-4.781v-11.859h-3.984v-4.625h3.984v-3.406q0-2.906 1.625-4.508t4.328-1.602q2.297 0 3.563 0.187z"})})}),Object(b.jsx)("a",{href:"www.twitter.com",children:Object(b.jsx)("svg",{version:"1.1",width:"26",height:"28",viewBox:"0 0 26 28","aria-hidden":"true",className:"symbol-social symbol-social-twitter",children:Object(b.jsx)("path",{d:"M25.312 6.375q-1.047 1.531-2.531 2.609 0.016 0.219 0.016 0.656 0 2.031-0.594 4.055t-1.805 3.883-2.883 3.289-4.031 2.281-5.047 0.852q-4.234 0-7.75-2.266 0.547 0.063 1.219 0.063 3.516 0 6.266-2.156-1.641-0.031-2.938-1.008t-1.781-2.492q0.516 0.078 0.953 0.078 0.672 0 1.328-0.172-1.75-0.359-2.898-1.742t-1.148-3.211v-0.063q1.062 0.594 2.281 0.641-1.031-0.688-1.641-1.797t-0.609-2.406q0-1.375 0.688-2.547 1.891 2.328 4.602 3.727t5.805 1.555q-0.125-0.594-0.125-1.156 0-2.094 1.477-3.57t3.57-1.477q2.188 0 3.687 1.594 1.703-0.328 3.203-1.219-0.578 1.797-2.219 2.781 1.453-0.156 2.906-0.781z"})})})]})}),E=(c(199),function(e){var t=e.data,c=t.title,a=t.description,s=t.image,r=t.author,n=t.createdAt;return Object(b.jsxs)("div",{className:"post-container",children:[Object(b.jsxs)("figure",{className:"post-fig",children:[Object(b.jsx)("img",{src:"https://guarded-bayou-18266.herokuapp.com/"+s,alt:c,className:"post-image"}),Object(b.jsx)("figcaption",{className:"post-header",children:c})]}),Object(b.jsxs)("p",{className:"post-by",children:["By ",Object(b.jsx)("span",{className:"post-author",children:r.userName})," on ",n]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"post-grid",children:[Object(b.jsx)(C,{}),Object(b.jsx)("article",{className:"post-body",dangerouslySetInnerHTML:{__html:a}})]})]})}),P=(c(200),function(e){var t=e.comments,c=e.handleDelete;return t.map((function(e){return Object(b.jsxs)("div",{className:"comment-card",children:[Object(b.jsxs)("div",{className:"comment-flex",children:[Object(b.jsx)("p",{className:"comment-user",children:e.userName}),Object(b.jsx)("small",{className:"comment-date",children:e.createdAt})]}),Object(b.jsx)("p",{className:"comment-body",children:e.description}),Object(b.jsx)("button",{className:"comment-delete-btn",onClick:function(){return c(e._id)},children:"Delete"})]},e._id)}))}),_=(c(201),function(){var e=Object(d.f)().id,t=Object(a.useState)(null),c=Object(u.a)(t,2),s=c[0],r=c[1],n=Object(a.useState)(!0),o=Object(u.a)(n,2),i=o[0],m=o[1],h=Object(a.useState)(null),p=Object(u.a)(h,2),x=p[0],f=p[1],v=function(){var t=Object(j.a)(l.a.mark((function t(){var c,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://guarded-bayou-18266.herokuapp.com/api/v1/post/".concat(e));case 3:return c=t.sent,t.next=6,c.json();case 6:a=t.sent,200===c.status?(f((function(e){return a})),m(!1)):(m(!1),r(a)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),m(!1),r(x);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(j.a)(l.a.mark((function t(c){var a,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=localStorage.getItem("token"),t.next=4,fetch("https://guarded-bayou-18266.herokuapp.com/api/v1/post/".concat(e,"/comment"),{method:"DELETE",headers:{commentId:c,Authorization:"Bearer ".concat(a)}});case 4:return s=t.sent,t.next=7,s.json();case 7:t.sent,200===s.status?window.location.reload():console.log(x.message),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){v()}),[]),s?Object(b.jsx)(y,{message:s.message}):i?Object(b.jsx)("div",{className:"center-container",children:Object(b.jsx)(O,{})}):x?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(E,{data:x}),Object(b.jsx)("div",{className:"comments-container",id:"comments",children:Object(b.jsx)(P,{comments:x.comments,handleDelete:g})})]}):void 0});var A=function(){var e=Object(a.useState)(!0),t=Object(u.a)(e,2),c=t[0],s=t[1],r=Object(a.useState)(!1),n=Object(u.a)(r,2),o=n[0],i=n[1],h=Object(a.useState)(!1),p=Object(u.a)(h,2),O=p[0],x=p[1],f=Object(a.useState)(null),v=Object(u.a)(f,2),g=v[0],w=v[1],y=Object(d.e)();Object(a.useEffect)((function(){var e=localStorage.getItem("token"),t=localStorage.getItem("expiry");if(e)return t<Date.now()?(localStorage.removeItem("token"),localStorage.removeItem("expiry"),void s(!1)):(i(!0),void s(!1));s(!1)}),[]);var k=function(){var e=Object(j.a)(l.a.mark((function e(t){var c,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,fetch("https://guarded-bayou-18266.herokuapp.com/api/v1/auth/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)});case 3:return c=e.sent,e.next=6,c.json();case 6:if(a=e.sent,200===c.status){e.next=13;break}return w(a.message),x(!1),e.abrupt("return");case 13:i(!0),localStorage.setItem("token",a.token),s=Date.now()+72e5,localStorage.setItem("expiry",s),x(!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){localStorage.removeItem("token"),localStorage.removeItem("expiry"),i(!1),y.push("/")};return c?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(m,{isAuth:o,logout:S})}):o?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(m,{isAuth:o,logout:S}),Object(b.jsx)(d.a,{exact:!0,path:"/",children:Object(b.jsx)(I,{})}),Object(b.jsx)(d.a,{path:"/post/:id",children:Object(b.jsx)(_,{})}),Object(b.jsx)(d.a,{exact:!0,path:"/create",children:Object(b.jsx)(q,{})})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(m,{isAuth:o,logout:S}),Object(b.jsx)(N,{login:k,error:g,loggingIn:O})]})};c(202);n.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(o.a,{basename:"/blog-admin",children:Object(b.jsx)(A,{})})}),document.getElementById("root"))},88:function(e,t,c){}},[[203,1,2]]]);
//# sourceMappingURL=main.87c49680.chunk.js.map